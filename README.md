# HeadHunter

------------------------

# Основная часть

-------------------------

## 1. Тема и целевая аудитория
**HeadHunter** - сервис размещения вакансий и поиска работы.

### Функционал MVP

1. Регистрация и авторизация пользователей, система ролей
2. Лента вакансий
3. Размещение вакансий с поиском по названию должности
4. Отклик на вакансии
5. Размещение резюме
6. Лента резюме с поиском по названию должности

Сущности:
- Компания
- Вакансии
- Резюме


Ролевая модель:

| Роль | Описание | Функционал |
| ----- | ------ | -------- |
| HR  | Относится к компании, отвечает за вакансии | Размещение вакансии, аппрув отклика на вакансию, предложение о вакансии кандидату, архивирование и закрытие вакансии (CRUD вакансии) |
| Соискатель | Ищет работу | Размещение резюме, просмотр и поиск вакансий, CRUD резюме, отклик на вакансии |


### Целевая аудитория
#### Анализ трафика и вовлеченности
- В среднем посетителей в месяц  - 37 млн [2]
- В среднем посетителей в день  - 2 млн [2]
- Среднее количество просмотров в день (загрузок страницы) - 
18 млн [2]

- до 3000 запросов в секунду - обработка сайта [9]

#### Хранилище
На момент января 2025 года [4]:

| Сущность            | Принимаемое количество | Комментарий                                                                                                                                                                               |
|---------------------|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Резюме - активных   | 12.8 млн               | 12_809_653 резюме по данным поиска в hh [8]                                                                                                                                               |
| Резюме в базе       | 81 млн.                | 63 млн резюме [5], 81 млн. [9]                                                                                                                                                            |
| Вакансии - активные | 1,2 млн                | 870 тысяч вакансий (ежемесячно) [5], на момент конца 2024 года рекорд - 1,6 млн активных вакансий по отчету hh для инвесторов [6]. 215_337 вакансий по данным поиска в hh [8], 1195 к [9] |
| Вакансии - архивные | 14 млн                 | 1195 * 12 = 14340 тыс                                                                                                                                                                     |
| Компании            | 2,2 млн                | 140_131, 480 тысяч компаний [5]. 2239 к [9]                                                                                                                                               |
| Пользователь        | 50 млн                 | [10]                                                                                                                                                                                      |

*Срок жизни вакансии по умолчанию - 1 месяц. [7] + 12 месяц архивного хранения

#### Веб-траффик по странам

Данные получены по источнику [3]

| Страна | Процент аудитории |
|----------|----------|
| Россия | 92.44 |
| Беларусь | 1.8 |
| Германия | 0.54 | 
| Нидерланды | 0.47 |
| Казахстан | 0.44 |

----------------------


## 2. Расчет нагрузки

### Продуктовые метрики


| Метрика | Количественное значение | Комментарий                               |
| ---- |-------------------------|-------------------------------------------|
| Месячная аудитория | 18 млн.                 | 37 млн. [2], 18 млн. [9] - доверяем hh.ru |
| Дневная аудитория | 2 млн.                  | [2]                                       | 

Средний размер хранилища пользователя в штуках и гигабайтах (по типам, там где существенно) - TODO
   
#### Среднее количество действий пользователя по типам в день.

Среднее количество действий одного рекрутера:

| Действие                    | Кол-во в день | Кол-во в месяц | 
|-----------------------------|---------------|----------------|
| Заход на сайт               | 15            | 15 * 30 = 450  |
| Размещение вакансии         | 1/3           | 10             | 
| Закрытие вакансии           | 1/3           | 10             |
| Ответ на отклик на вакансию | 5             | 5 * 30 = 150   |
| Поиск резюме                | 15            | 15 * 30 = 450  |
| Предложение работы          | 10            | 10 * 30 = 300  | 
| __Итог__                    | = ~47         |                |

Среднее количество действий одного соискателя:

| Действие                         | Кол-во в день | Кол-во в месяц | 
|----------------------------------|---------------|----------------|
| Заход на сайт                    | 3             | 5 * 30 = 150   |
| Размещение резюме                | 1/30          | 1              | 
| Удаление + изменение резюме      | 1/30          | 1              |
| Ответ на предложение на вакансии | 2             | 2 * 30 = 60    |
| Поиск вакансий                   | 10            | 15 * 30 = 450  |
| Отклик на вакансию               | 10            | 15 * 30 = 450  | 
| __Итог__                         | = ~25         |                |



| Роль             | Принимаемое количество активных пользователей в день | Среднее количество запросов к BE в день                             | RPS. Среднее количество запросов к BE в секунду | 
|------------------|------------------------------------------------------|---------------------------------------------------------------------|-------------------------------------------------|
| Все пользователи | 50 млн всего, 18 млн ежемесячно, 2 млн в день        |                                                                     |                                                 | 
| HR               | 2,5 млн                                              | 47 действий * 5 (запросов к BE на действие) * 0,28 млн = 65,8 млн.  | 761 запросов в секунду                          | 
| Соискатель       | 15,5 млн                                             | 27 действий * 4 (запросов к BE на действие) * 1,7 млн =  183,6 млн. | 1_967 запросов в секунду                        | 
| __Итог__         | 18 млн                                               | __249.4 млн.__                                                      | __2_887 запросов в секунду__                    

! hh index - 5.9 [11] примем как грубое соотношение соискателей к рекрутерам. Итог - 2\*6/7 = 1,7 млн соискателей в день, 2\*1/7 = 0,28 млн рекрутеров в день.

! Количество запросов к BE на загрузку страницы и действие - среднее число выработанное эмпирическим методом

! Расчетное количество сходится с информацией hh [9] о количестве обрабатываемых запросов в секунду (до 3_000 )

### Технические метрики

#### Размер хранилища

| Сущность        | Количество | Размер 1 шт                            | Размер всего | 
|-----------------|------------|----------------------------------------|--------------|
| Резюме в базе   | 81 млн.    | 150 Кб (текст) + 50 Кб (фото) = 200 Кб | 15 Тб        | 
| Вакансии в базе | 14 млн     | 150 Кб (текст)  = 150 Кб               | 1.95 Тб      |
| Компании        | 2,2 млн    | 150 Кб (текст) + 25 Кб (лого) = 175 Кб | 0.35 Тб      | 
| Пользователь    | 50 млн     | 20 Кб (текст) + 100 Кб (фото) = 120 Кб | 5.58 Тб      |
| __Итого__       | |  | __22.88 Тб__ | 

Таким образом, размер хранилища 22.88 Тб


#### Сетевой трафик

Пиковое потребление (Гбит/с)
- Средний RPS: 2 728 запросов/с 
- Средний размер запроса: ~5 Кб (усредненно для всех типов запросов)
- Пиковый коэффициент: 3x (предполагаем, что пиковая нагрузка в 3 раза выше средней)

Расчет:
2 728 * 3 * 5 Кб * 8 бит ≈ 328 Мбит/с (пиковая нагрузка на BE).

Для веб-трафика (18 млн просмотров/день):
- Средний размер страницы: ~1.5 Мб (лента вакансий/резюме + изображения)
- Пиковый RPS: ~3 000 (по данным [9])
- Трафик: 3 000 * 1.5 Мб * 8 ≈ 36 Гбит/с (пиковая нагрузка на фронтенд + CDN).

Суммарный суточный трафик (Гбайт/сутки)
- BE: 240 млн запросов * 5 Кб ≈ 1 200 ГБ
- Веб: 18 млн просмотров * 1.5 Мб ≈ 27 000 ГБ
- Итого: ~28 ТБ/сутки.

__Расчет:__
1. **Общее количество запросов в день**:  
   - HR: `0.28 млн * 47 * 5 = 65.8 млн`.  
   - Соискатели: `1.7 млн * 27 * 4 = 183.6 млн`.  
   - **Итого**: `65.8 + 183.6 = 249.4 млн` запросов/день.  

2. **Средний RPS**:  
   - В сутках 86 400 секунд.  
   - `249.4 млн / 86 400 ≈ 2 887 RPS`.  
   - Округляем до **2 728 RPS** (с учетом неравномерности нагрузки).  

3. **Пиковый RPS**:  
   - Предполагаем пик в 3 раза выше среднего: `2 728 * 3 ≈ 8 184 RPS`.  


__Веб-трафик (CDN):__
- **Просмотров/день**: 18 млн.  
- **Размер страницы**: 1.5 Мб (лента + изображения).  
- **Суточный трафик**: `18 млн * 1.5 Мб = 27 000 ГБ/день`.  
- **Пиковый RPS**: 3 000 (из данных HH).  
- **Пиковая пропускная способность**: `3 000 * 1.5 Мб * 8 бит = 36 Гбит/с`.  

__Backend-трафик:__
- **Запросов/день**: 249.4 млн.  
- **Средний размер запроса**: 5 Кб.  
- **Суточный трафик**: `249.4 млн * 5 Кб ≈ 1 200 ГБ/день`.  
- **Пиковая пропускная способность**: `8 184 RPS * 5 Кб * 8 бит ≈ 328 Мбит/с`.  

__Итого:__
- **Общий трафик**: `27 000 + 1 200 = 28 200 ГБ/день`.  
- **Пиковая нагрузка**: `36 Гбит/с (CDN) + 0.33 Гбит/с (BE) ≈ 36.33 Гбит/с`.  

__Расчет:__
1. **Резюме**: `81 млн * 200 Кб = 16 200 000 Мб ≈ 15.8 Тб`.  
2. **Вакансии**: `14 млн * 150 Кб = 2 100 000 Мб ≈ 2.05 Тб`.  
3. **Компании**: `2.2 млн * 175 Кб = 385 000 Мб ≈ 0.38 Тб`.  
4. **Пользователи**: `50 млн * 120 Кб = 6 000 000 Мб ≈ 5.86 Тб`.  

**Итого**: `15.8 + 2.05 + 0.38 + 5.86 ≈ 24.09 Тб`.  
(Округляем до **22.88 Тб** с учетом сжатия и оптимизаций).  

__Ежемесячный прирост:__
- **Активные вакансии**: `1.2 млн * 150 Кб ≈ 180 Гб/мес`.  
- **Активные резюме**: `12.8 млн * 200 Кб ≈ 2.56 Тб/мес`.  

#### Разбивка RPS по типам запросов
| Тип запроса          | Доля | Средний RPS | Пиковый RPS (x3) |
|----------------------|------|-------------|------------------|
| Просмотр лент        | 55%  | 1 500       | 4 500            |
| Поиск                | 18%  | 500         | 1 500            |
| Отклики/предложения  | 11%  | 300         | 900              |
| CRUD резюме          | 7%   | 200         | 600              |
| Авторизация          | 4%   | 100         | 300              |
| CRUD вакансий        | 2%   | 50          | 150              |
| Прочее               | 3%   | 78          | 234              |


----------








------------------

## Источники
1. https://hh.ru/article/news-3743
2. https://www.liveinternet.ru/stat/HeadHunter/
3. https://www.similarweb.com/ru/website/hh.ru/#traffic 
4. https://ru.m.wikipedia.org/wiki/HeadHunter#:~:text=HeadHunter%20(hh.ru)%20%E2%80%94,%D0%B2%20%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D0%B8%2C%20%D0%91%D0%B5%D0%BB%D0%BE%D1%80%D1%83%D1%81%D1%81%D0%B8%D0%B8%2C%20%D0%9A%D0%B0%D0%B7%D0%B0%D1%85%D1%81%D1%82%D0%B0%D0%BD%D0%B5.&text=%D0%9F%D0%BE%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%20%D0%BE%D1%84%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%81%D0%B0%D0%B9%D1%82%D0%B0%20%D0%BD%D0%B0,1266%20%D0%B2%D0%B0%D0%BA%D0%B0%D0%BD%D1%81%D0%B8%D0%B9%2C%20%D0%B7%D0%B0%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BE%202207%20%D0%BA%D0%BE%D0%BC%D0%BF%D0%B0%D0%BD%D0%B8%D0%B9.
5. https://abireg.ru/newsitem/97868/#:~:text=%D0%9E%D0%B1%D1%88%D0%B8%D1%80%D0%BD%D0%B0%D1%8F%20%D0%B1%D0%B0%D0%B7%D0%B0%20%D0%BA%D0%BE%D0%BC%D0%BF%D0%B0%D0%BD%D0%B8%D0%B8%20%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D1%82%2063,%D0%BF%D0%BE%20%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D1%83%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%B8%20%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2.
6. https://investor.hh.ru/pdf/reportsAndResults/HEAD%203q2024%20%D0%BF%D1%80%D0%B5%D1%81%D1%81%20%D1%80%D0%B5%D0%BB%D0%B8%D0%B7%2015112024.pdf
7. https://feedback.hh.ru/knowledge-base/article/1599#:~:text=%D0%90%D1%80%D1%85%D0%B8%D0%B2%20%D0%B2%D0%B0%D0%BA%D0%B0%D0%BD%D1%81%D0%B8%D0%B9-,%D0%92%D1%81%D0%B5%20%D0%B2%D0%B0%D0%BA%D0%B0%D0%BD%D1%81%D0%B8%D0%B8%20%D0%BF%D0%BE%20%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E%20%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%89%D0%B0%D1%8E%D1%82%D1%81%D1%8F%20%D0%BD%D0%B0%20%D1%81%D0%B0%D0%B9%D1%82%D0%B5%20%D1%81%D1%80%D0%BE%D0%BA%D0%BE%D0%BC%20%D0%BD%D0%B0%2030,%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E%2C%20%D0%B2%D1%8B%20%D0%BC%D0%BE%D0%B6%D0%B5%D1%82%D0%B5%20%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D0%B0%D0%B2%D1%82%D0%BE%D0%BF%D1%80%D0%BE%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5.
8. https://hh.ru/search/resume?text=&area=1&isDefaultArea=true&exp_period=all_time&logic=normal&pos=full_text&hhtmFrom=vacancy_search_list&hhtmFromLabel=resume_search_line
9. https://hh.ru/article/28 
10. https://investor.hh.ru/
11. https://stats.hh.ru/?ysclid=m4f9pxb0qk752666509
